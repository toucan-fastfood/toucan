<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TOUCAN - تولید QR میز</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    .qr-area{display:flex;flex-wrap:wrap;gap:12px}
    .qr-card{background:white;padding:12px;border-radius:10px;color:#000;min-width:200px}
    .qr-card img{width:160px;height:160px;object-fit:contain;background:#fff;border-radius:8px}
  </style>
</head>
<body>
  <div class="header">
    <div class="brand">
      <div class="logo">Q</div>
      <div>
        <div style="font-weight:800;font-size:18px">TOUCAN - QR</div>
        <div style="font-size:13px;color:#ddd">تولید سریع QR مخصوص هر میز</div>
      </div>
    </div>
  </div>

  <h3>تولید QR برای میز</h3>
  <div style="margin-bottom:12px">
    <label>شماره میز: <input id="inp-table" type="number" min="1" max="30" value="1" /></label>
    <button id="gen" class="add-btn">تولید</button>
    <button id="gen-all" class="add-btn">تولید همه میزها (1..30)</button>
  </div>

  <div id="qr-area" class="qr-area"></div>

<script>
(function(){
  const qrArea = document.getElementById('qr-area');
  const input = document.getElementById('inp-table');
  document.getElementById('gen').onclick = ()=>{
    const t = Number(input.value) || 1;
    addQrCard(t);
  }
  document.getElementById('gen-all').onclick = ()=>{
    qrArea.innerHTML='';
    for(let i=1;i<=30;i++) addQrCard(i);
  }

  function addQrCard(table){
    const url = location.origin + location.pathname.replace(/qq.html$/,'') + 'menu.html?table=' + encodeURIComponent(table);
    const imgUrl = 'https://chart.googleapis.com/chart?chs=280x280&cht=qr&chl=' + encodeURIComponent(url);
    const card = document.createElement('div'); card.className='qr-card';
    const title = document.createElement('div'); title.textContent = 'میز ' + table;
    const img = document.createElement('img'); img.src = imgUrl;
    const a = document.createElement('a'); a.href = imgUrl; a.download = 'qr-table-' + table + '.png'; a.textContent='دانلود';
    card.appendChild(title); card.appendChild(img); card.appendChild(a);
    qrArea.appendChild(card);
  }
})();
</script>
</body>
</html>
