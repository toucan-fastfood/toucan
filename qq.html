<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TOUCAN - تولید URL میز</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    .qr-area{display:flex;flex-direction:column;gap:12px}
    .qr-card{background:white;padding:12px;border-radius:10px;color:#000;min-width:200px;display:flex;flex-direction:column;gap:8px}
    .url-box{background:#f3f3f3;padding:8px;border-radius:6px;word-break:break-all}
    .small{font-size:13px;color:#444}
    .inline{display:flex;gap:8px;align-items:center}
  </style>
</head>
<body>
  <div class="header">
    <div class="brand">
      <div class="logo">Q</div>
      <div>
        <div style="font-weight:800;font-size:18px">TOUCAN - تولید URL میز</div>
        <div style="font-size:13px;color:#ddd">لینک منو مخصوص هر میز (قابل تبدیل به QR توسط شما)</div>
      </div>
    </div>
  </div>

  <h3>تولید URL برای میز</h3>
  <div style="margin-bottom:12px">
    <label>شماره میز: <input id="inp-table" type="number" min="1" max="30" value="1" /></label>
    <button id="gen" class="add-btn">تولید URL</button>
    <button id="gen-all" class="add-btn">تولید همه میزها (1..30)</button>
  </div>

  <div id="qr-area" class="qr-area"></div>

<script>
(function(){
  const qrArea = document.getElementById('qr-area');
  const input = document.getElementById('inp-table');

  function buildMenuUrl(table){
    const rel = 'menu.html?table=' + encodeURIComponent(table);
    const abs = location.origin + (location.pathname.replace(/[^/]*$/, '')) + rel;
    return {relative: rel, absolute: abs};
  }

  document.getElementById('gen').onclick = ()=>{
    const t = Number(input.value) || 1;
    addUrlCard(t);
  }
  document.getElementById('gen-all').onclick = ()=>{
    qrArea.innerHTML='';
    for(let i=1;i<=30;i++) addUrlCard(i);
  }

  function addUrlCard(table){
    const u = buildMenuUrl(table);
    const card = document.createElement('div'); card.className='qr-card';
    const title = document.createElement('div'); title.textContent = 'میز ' + table; title.style.fontWeight='800';
    const small = document.createElement('div'); small.className='small'; small.textContent = 'لینک نسبی (برای تبدیل به QR یا استفاده محلی):';
    const urlRel = document.createElement('div'); urlRel.className='url-box'; urlRel.textContent = u.relative;
    const urlRelActions = document.createElement('div'); urlRelActions.className='inline';
    const copyRel = document.createElement('button'); copyRel.className='add-btn'; copyRel.textContent='کپی نسبی';
    copyRel.onclick = ()=> { navigator.clipboard.writeText(u.relative); alert('کپی شد: ' + u.relative); };
    urlRelActions.appendChild(copyRel);
    const small2 = document.createElement('div'); small2.className='small'; small2.textContent='لینک کامل (برای تولید QR آنلاین یا ارسال):';
    const urlAbs = document.createElement('div'); urlAbs.className='url-box'; urlAbs.textContent = u.absolute;
    const urlAbsActions = document.createElement('div'); urlAbsActions.className='inline';
    const copyAbs = document.createElement('button'); copyAbs.className='add-btn'; copyAbs.textContent='کپی کامل';
    copyAbs.onclick = ()=> { navigator.clipboard.writeText(u.absolute); alert('کپی شد: ' + u.absolute); };

    urlAbsActions.appendChild(copyAbs);

    const note = document.createElement('div'); note.className='small'; note.textContent='توجه: اکنون فقط URL نمایش داده می‌شود. برای تولید QR از سرویس دلخواه خود (مثلاً https://www.qr-code-generator.com) استفاده کنید.';

    card.appendChild(title);
    card.appendChild(small);
    card.appendChild(urlRel);
    card.appendChild(urlRelActions);
    card.appendChild(small2);
    card.appendChild(urlAbs);
    card.appendChild(urlAbsActions);
    card.appendChild(note);

    qrArea.appendChild(card);
  }

})();
</script>
</body>
</html>
